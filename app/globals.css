@import "tailwindcss";

@custom-variant dark (&:is(.dark *));

@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-card: var(--card);

  --radius: var(--radius);
  --drop-shadow-card: 0 0px 24px var(--drop-shadow-color);
  --scale-102: 1.02;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@layer base {
  :root {
    --radius: 0.65rem;
    --background: oklch(1 0 0);
    --page-background: linear-gradient(
      to bottom,
      oklch(1 0 0),
      oklch(0.99 0 0)
    );
    --foreground: oklch(0.145 0 0);
    --primary: oklch(0.205 0 0);
    --primary-foreground: oklch(0.985 0 0);
    --secondary: oklch(0.97 0 0);
    --secondary-foreground: oklch(0.6 0 0);
    --muted: oklch(0.97 0 0);
    --muted-foreground: oklch(0.556 0 0);
    --border: oklch(0.922 0 0);
    --input: oklch(0.922 0 0);
    --ring: oklch(0.708 0 0);
    --card: oklch(1 0 0);
    --drop-shadow-color: oklch(0.145 0 0 / 0.08);
  }

  .dark {
    --background: oklch(0.145 0 0);
    --page-background: linear-gradient(to bottom, rgb(12 12 12), rgb(0 0 0));
    --foreground: oklch(0.985 0 0);
    --primary: oklch(0.922 0 0);
    --primary-foreground: oklch(0.205 0 0);
    --secondary: oklch(0.269 0 0);
    --secondary-foreground: oklch(0.8 0 0);
    --muted: oklch(0.269 0 0);
    --muted-foreground: oklch(0.708 0 0);
    --border: oklch(1 0 0 / 5%);
    --input: oklch(1 0 0 / 15%);
    --ring: oklch(0.556 0 0);
    --card: oklch(0.22 0 0);
    --drop-shadow-color: oklch(0.985 0 0 / 0.05);
  }

  * {
    @apply subpixel-antialiased;
  }

  body {
    @apply bg-background text-foreground;
  }

  .page-background {
    background: var(--page-background);
  }
}

.prose .anchor {
  @apply invisible absolute no-underline;

  margin-left: -1em;
  padding-right: 0.5em;
  width: 80%;
  max-width: 700px;
  cursor: pointer;
}

.anchor:hover {
  @apply visible;
}

.prose a {
  @apply text-foreground font-bold transition-all;
}

.prose a:hover {
  @apply text-secondary-foreground;
}

.prose .anchor:after {
  @apply text-foreground/20;
  content: "#";
}

.prose *:hover > .anchor {
  @apply visible;
}

.prose hr {
  @apply border-border mx-auto my-8 max-w-96 border-t border-dashed;
}

.prose pre {
  @apply border-border bg-muted text-muted-foreground overflow-x-auto rounded-lg border px-3 py-2 text-sm;
}

.prose code {
  @apply rounded-lg px-1 py-0.5;
}

.prose pre code {
  @apply p-0;
  border: initial;
  line-height: 1.5;
}

.prose code span {
  @apply font-semibold;
}

.prose img {
  /* Don't apply styles to next/image */
  @apply mx-auto my-0 rounded-xl;
}

.prose p {
  @apply text-secondary-foreground my-4 leading-7;
}

.prose h1 {
  @apply text-foreground mt-6 mb-2 text-3xl font-semibold;
}

.prose h2 {
  @apply text-foreground mt-6 mb-2 text-2xl font-semibold;
}

.prose h3 {
  @apply text-foreground mt-6 mb-2 text-xl font-semibold;
}

.prose h4 {
  @apply text-foreground mt-6 mb-2 text-lg font-semibold;
}

.prose strong {
  @apply leading-7 font-semibold;
}

.prose ul {
  @apply text-secondary-foreground list-disc pl-6;
}

.prose ol {
  @apply text-secondary-foreground list-decimal pl-6;
}

.prose > :first-child {
  /* Override removing top margin, causing layout shift */
  margin-top: 1.25em !important;
  margin-bottom: 1.25em !important;
}

pre::-webkit-scrollbar {
  display: none;
}

pre {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

/* Remove Safari input shadow on mobile */
input[type="text"],
input[type="email"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

table {
  display: block;
  max-width: fit-content;
  overflow-x: auto;
  white-space: nowrap;
}

.title {
  @apply text-4xl font-semibold text-pretty;
}

.divide-dashed-spaced > * + * {
  border-left: 0.5px dashed var(--color-border);
  border-image: repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent 4px,
      var(--color-border) 4px,
      var(--color-border) 8px
    )
    1;
}
